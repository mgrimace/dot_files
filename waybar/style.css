/* =============================================================================
 *
 * Waybar configuration for Niri
 *
 * =========================================================================== */

/* ────────────────────────────────────────────
 * Theme Switcher
 * ──────────────────────────────────────────── */

/* Active theme: Moondust Dark */
@import "themes/moondust-dark.css";

/* Alternate options:
@import "themes/everforest-dark.css";
*/

/* -----------------------------------------------------------------------------
 * Keyframes
 * -------------------------------------------------------------------------- */
@keyframes blink-warning {
    70% { color: @base-bg; }
    to {
        color: @base-bg;
        background-color: @warning;
    }
}

@keyframes blink-critical {
    70% { color: @base-bg; }
    to {
        color: @base-bg;
        background-color: @critical;
    }
}

/* -----------------------------------------------------------------------------
 * Base styles
 * -------------------------------------------------------------------------- */
* {
    border: none;
    border-radius: 0;
    min-height: 0;
    margin: 1px;
    padding: 0;
}

/* The whole bar */
#waybar {
    background: transparent;
    color: @text-primary;
    background-color: @base-bg;
    font-family: JetBrainsMono, monospace;
    font-size: 13px;
    border-bottom: 1px solid @border;
}

/* -----------------------------------------------------------------------------
 * Universal module defaults
 * -------------------------------------------------------------------------- */

/* Common settings*/
#network,
#language,
#idle_inhibitor,
#cpu,
#memory,
#temperature,
#backlight,
#wireplumber,
#pulseaudio,
#battery,
#clock,
#tray,
#power-profiles-daemon,
#custom-vpn{
    padding: 0.3rem 0.5rem;
    margin: 1px 0;
    background-color: transparent;
    color: @text-primary;
}

/* Note: change first rem higher, e.g., 0.5 for thicker bar, and second rem higher for wider spacing between icons */

/* -----------------------------------------------------------------------------
 * Left: Workspaces & Clock
 * -------------------------------------------------------------------------- */

#clock { margin-left: 5px; }

#workspaces {
    font-size: 13px;
    background-color: transparent;
}

#workspaces button {
    border-radius: 0;
    color: @text-secondary;
    background-color: @surface-bg;
    padding: 2px 8px;
    margin: 0;
    transition: all 0.2s ease;
}

#workspaces button.active,
#workspaces button.focused {
    background-color: @accent-blue;
    color: @base-bg;
    box-shadow: inset 0 0 0 1px @accent-blue-hover;
}

#workspaces button:hover {
    background-color: @elevated-bg;
    color: @text-primary;
}

#workspaces button.urgent {
    background-color: @critical;
    color: @base-bg;
    animation: blink-critical 2s infinite;
}

/* -----------------------------------------------------------------------------
 * Center
 * -------------------------------------------------------------------------- */
#window { font-weight: normal; }

/* -----------------------------------------------------------------------------
 * Right Side Modules
 * -------------------------------------------------------------------------- */

/* Network */
#network { color: @accent-slate; }
#network.disconnected { color: @warning; }

/* VPN */
#custom-vpn { color: @accent-blue; }

/* Language */
#language { color: @text-secondary; }

/* Idle inhibitor */
#idle_inhibitor { 
    color: @text-muted; 
    margin-top: 2px;
}

#idle_inhibitor.activated { color: @accent-blue; }

/* CPU */
#cpu.warning { color: @warning; }
#cpu.critical {
    color: @critical;
    animation: blink-critical 2s infinite;
}

/* Memory */
#memory.warning { color: @warning; }
#memory.critical {
    color: @critical;
    animation: blink-critical 2s infinite;
}

/* Temperature */
#temperature.critical {
    color: @critical;
    animation: blink-critical 2s infinite;
}

/* Backlight */
#backlight { color: @text-primary; }

/* Wireplumber / Pulseaudio */
#wireplumber,
#pulseaudio { color: @text-primary; }

#wireplumber.muted,
#pulseaudio.muted { color: @text-muted; }

/* Battery */
#battery.warning { color: @warning; }
#battery.critical { color: @critical; }
#battery.warning.discharging { animation: blink-warning 3s infinite; }
#battery.critical.discharging { animation: blink-critical 2s infinite; }
#battery.charging { color: @accent-blue; }

/* Power profile */
#power-profiles-daemon {
    margin-top: 2px;
    color: @text-muted;
}

/* Tray */
#tray {
    padding: 0 0px;
    min-height: 0;
    margin-top: 2px;
}

#tray > .needs-attention { background-color: @accent-blue}

#tray menu {
    background-color: @elevated-bg;
    color: @text-primary;
}

/* Custom tray */
#custom-tray {
    color: @text-muted;
    transition: 0.2s ease;
}

#custom-tray:hover { color: @warning; }

/* Custom power */

#custom-power { 
    margin-right: 5px; 
    margin-top: 2px;
    color: @text-muted;
}

#custom-power:hover { color: @critical; }